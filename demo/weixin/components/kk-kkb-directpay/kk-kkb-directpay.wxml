<!-- kk币充值 -->
<view class="kk-buy-kkb">
    <!-- 支付成功弹窗 -->
    <view wx:if="{{ isShowPopup && pageIsShowPopup}}">
        <template is="kk-buykkb-popup" data="{{ rechargeKkb, rechargeResult, userAccount, topicList, images, shotCouponText }}"/>
    </view>
</view>

<kk-toast toast="{{ toast }}"></kk-toast>

<!-- 购买kkb成功弹窗模板 -->
<template name="kk-buykkb-popup" >
    <!-- 弹窗外层盒子 -->
    <view class="kk-buykkb-popup" catchtouchmove catchtap="closeBtnTap">
        <!-- 内容部分 -->
        <view class="popup-content">
            <!-- 背景图 -->
            <view class="popup-content-bg">
                <image class="kkb-icon" src="{{ images.popup }}"/>
            </view>
            
            <!-- 内容展示区域 -->
            <view class="content" catchtap>
                <!-- 弹窗头部信息 -->
                <view class="top">
                    <!-- 标题 -->
                    <view class="title">充值成功</view>

                    <!-- 代金券发放展示 -->
                    <view class="coupon-text" wx:if="{{ shotCouponText }}">
                        代金券已放入“我的钱包”
                    </view>

                    <!-- 充值金额展示 本次充值xx，获赠xx，当前余额xxx -->
                    <view class="bug-text {{ shotCouponText ? 'has-coupon' : '' }}">
                        本次充值{{rechargeKkb.recharge_value}}，{{
                            rechargeKkb.present_red_kkb ? '获赠'+rechargeKkb.present_red_kkb+'，' : ''
                        }}当前余额{{ userAccount }}
                    </view>
                </view>

                <!-- 专题列表 -->
                <view class="topic-list">
                    <!-- item -->
                    <view 
                        class="list-item" 
                        wx:for="{{ topicList }}" 
                        wx:key="uuid" 
                        wx:for-item="item"
                        data-title="{{item.topicTitle}}"
                        data-id="{{item.topicId}}"
                        bindtap="topicItemTap"
                    >
                        <!-- 封面 -->
                        <kk-cover
                            class="cover"
                            src="{{item.topicCoverImageUrl}}"
                            height="{{ 224 }}"
                            width="{{ 168 }}"
                        />

                        <!-- 底部描述 -->
                        <view class="des title">{{ item.topicTitle }}</view>
                        <view class="des tag">{{ item.recommendReason }}</view>
                    
                    </view>
                </view>

                <!-- 关闭按钮 -->
                <view class="close">
                    <view class="btn" catchtap="closeBtnTap">
                        <image src="{{ images.close }}"/>
                    </view>
                </view>
            </view>
            <!-- 内容展示区域 -->
        </view>
    </view>
</template>


<mp-dialog
    show="{{ isShowMpDialog }}"
    content="订单状态获取失败"
    buttons="{{ [{ text: '取消' },{ text: '重试' }] }}"
    bindbuttontap="tapDialogButton">
</mp-dialog>
